#!/bin/bash
source translation
source ~/.ob-welcome
source /etc/os-release
GLOBALS_FILE=~/.config/kdedefaults/kdeglobals

CSS_FILE="css/style.css"

if [[ -f "$GLOBALS_FILE" ]]; then
    COLOR_SCHEME=$(grep -E "^ColorScheme=" "$GLOBALS_FILE" | cut -d '=' -f 2)

    if [[ "$COLOR_SCHEME" == "BreezeDark" ]]; then
        CSS_FILE="css/dark.css"
    fi
fi
#Translation
export TEXTDOMAINDIR="/usr/share/locale"
export TEXTDOMAIN=ob-welcome

[ -z "$USER" ] && USER="$(id -nu)"
REALNAME="$(getent passwd $USER |cut -d: -f5)"
[ -z "$REALNAME" ] && REALNAME="$USER"

sed \
	-e "s|%1|<span class=\"username\">$REALNAME</span>|g" \
	-e "s|%2|${NAME} ${VERSION}|g" \
	-e "s|%3|$(uname -r | cut -d"-" -f1) $(uname -r | cut -d"-" -f2)|g" \
	<< EOF
<html>

	<head>
	<title>$title</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="css/style.css" />
        <script src="css/block.js"></script>
        <script src="css/preview.js"></script>
	</head>
<body>

<div class="home main constrain">

  <h2>$prilagodbaizgleda</h2>

</div>

<div class="home apps">
  
    
    <a class="app button flatpak" href=apps/start-kdethemes.run>
      <img 
            srcset="images/desktop-theme.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titlechangethemes</span>
    </a>


  
    
    <a class="app button flatpak" href=apps/install-mauishell.run>
      <img 
            srcset="images/login.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titlemauishell</span>
    </a>


    
    <a class="app button flatpak" href=apps/install-lxqt.run>
      <img
          
            srcset="images/compton.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titlelxqt</span>
    </a>

  
    
    <a class="app button flatpak" href=apps/start-kdeicons.run>
      <img
            srcset="images/desktop-icons.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titlechangeicons</span>
    </a>

    <a class="app button flatpak" href=apps/install-gnomeshell.run>
      <img 
            srcset="images/colorgrab.png"
          
        
        src="images/application-default-icon.svg"
      alt="Agenda icon" />

      <span class="title">$titlegnomeshell</span>
    </a>
    
    <a class="app button flatpak" href=apps/start-fonts.run>
      <img 
            srcset="images/fonts.png"
          
        
        src="images/application-default-icon.svg"
      alt="Agenda icon" />

      <span class="title">$titledrakfont</span>
    </a>


</div>

<div class="bg-1">
<div class="home main constrain">

  <h2>$izbornikaplikacija (root)</h2>

</div>
<div class="home apps">
    <a class="app button flatpak" href=apps/menu11.run data-preview="images/menu/menu11.png">
      <img 
            srcset="images/menu11.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">Menu11</span>
    </a>
    <a class="app button flatpak" href=apps/menu11center.run data-preview="images/menu/menu11center.png">
      <img 
            srcset="images/menu11center.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">Menu11 Center</span>
    </a>
    <a class="app button flatpak" href=apps/kicker.run data-preview="images/menu/kicker.png">
      <img 
            srcset="images/kicker.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">Kicker</span>
    </a>

    <a class="app button flatpak" href=apps/kickoff.run data-preview="images/menu/kickoff.png">
      <img 
            srcset="images/kickoff.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">Kickoff</span>
    </a>

    <a class="app button flatpak" href=apps/simplemenu.run data-preview="images/menu/simple.png">
      <img 
  
            srcset="images/simple.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">Simple Menu</span>
    </a>
    
    <a class="app button flatpak" href=apps/kickerdash.run data-preview="images/menu/dash.png">
      <img
        
            srcset="images/dash.png"
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">Dash</span>
    </a>
</div>
</div>
<div class="home main constrain">

  <h2>Brze postavke</h2>

</div>

<div class="home apps">
    <a class="app button flatpak" href=apps/start-xfdrake.run>
      <img
            srcset="images/monitor.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titlexfdrake</span>
    </a>  
    <a class="app button flatpak" href=apps/start-drakconnect.run>
      <img 
            srcset="images/network.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titleconfiglan</span>
    </a>
    <a class="app button flatpak" href=apps/start-audio.run>
      <img
            srcset="images/sound.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titleaudio</span>
    </a>
    <a class="app button flatpak" href=apps/start-clock.run>
      <img
            srcset="images/clock.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titledrakclock</span>
    </a>
    <a class="app button flatpak" href=apps/language.run>
      <img     
            srcset="images/language.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titlelanguage</span>
    </a>
    <a class="app button flatpak" href=apps/start-keyboard.run>
      <img 
            srcset="images/keyboard.png"
          
        
        src="images/application-default-icon.svg"
      alt="" />

      <span class="title">$titlekeyboard</span>
    </a>  
</div>

EOF

cat << EOF
</body>
</html>
EOF
